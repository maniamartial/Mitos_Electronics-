{"ast":null,"code":"import _objectSpread from\"/home/oem/Desktop/MITOS/mitosElectronics/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/home/oem/Desktop/MITOS/mitosElectronics/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import axios from\"axios\";import{useParams}from\"react-router-dom\";import{Link}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var UpdateProduct=function UpdateProduct(){var _useParams=useParams(),id=_useParams.id;var _useState=useState({name:\"\",price:0,description:\"\",stock:0,category:\"\",// Category ID will be stored here\nimage:null}),_useState2=_slicedToArray(_useState,2),productData=_useState2[0],setProductData=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),categories=_useState4[0],setCategories=_useState4[1];useEffect(function(){// Fetch the product details using the ID\naxios.get(\"http://127.0.0.1:8000/api/electronics/\".concat(id,\"/\")).then(function(response){var product=response.data;setProductData({name:product.name,price:product.price,description:product.description,stock:product.stock,category:product.category.id,// Assuming category is an object with an 'id' field\nimage:product.image// You can update image logic if needed\n});});// Fetch available categories for the combobox\naxios.get(\"http://127.0.0.1:8000/api/categories/\").then(function(response){setCategories(response.data);});},[id]);var handleImageChange=function handleImageChange(e){var file=e.target.files[0];setProductData(_objectSpread(_objectSpread({},productData),{},{image:file}));};var handleSubmit=function handleSubmit(e){e.preventDefault();var formData=new FormData();formData.append(\"name\",productData.name);formData.append(\"price\",productData.price);formData.append(\"description\",productData.description);formData.append(\"stock\",productData.stock);formData.append(\"category\",productData.category);formData.append(\"image\",productData.image);if(productData.category===productData.originalCategory){formData.delete(\"category\");}if(!productData.image){formData.delete(\"image\");}// Update the product data on the server\naxios.put(\"http://127.0.0.1:8000/api/electronics/\".concat(id,\"/\"),formData,{headers:{\"Content-Type\":\"multipart/form-data\"}}).then(function(response){console.log(\"Product updated:\",response.data);// Redirect to products page after successful update\nwindow.location.href=\"/view_products\";}).catch(function(error){console.error(\"Error updating product:\",error);});};return/*#__PURE__*/_jsxs(\"div\",{className:\"container mt-4 text-center\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[/*#__PURE__*/_jsx(Link,{to:\"/admin\",className:\"text-dark mr-5\",children:/*#__PURE__*/_jsx(\"i\",{className:\"text-warning fas fa-arrow-left mr-5\"})}),\" \",\"Update Product\"]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Name:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",value:productData.name,onChange:function onChange(e){return setProductData(_objectSpread(_objectSpread({},productData),{},{name:e.target.value}));},required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Price:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",className:\"form-control\",value:productData.price,onChange:function onChange(e){return setProductData(_objectSpread(_objectSpread({},productData),{},{price:e.target.value}));},required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Description:\"}),/*#__PURE__*/_jsx(\"textarea\",{className:\"form-control\",value:productData.description,onChange:function onChange(e){return setProductData(_objectSpread(_objectSpread({},productData),{},{description:e.target.value}));},required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Stock:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",className:\"form-control\",value:productData.stock,onChange:function onChange(e){return setProductData(_objectSpread(_objectSpread({},productData),{},{stock:e.target.value}));},required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Category:\"}),/*#__PURE__*/_jsxs(\"select\",{className:\"form-control\",value:productData.category,onChange:function onChange(e){return setProductData(_objectSpread(_objectSpread({},productData),{},{category:e.target.value}));},required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",disabled:true,children:\"Select a category\"}),categories.map(function(category){return/*#__PURE__*/_jsx(\"option\",{value:category.id,children:category.name},category.id);})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Image:\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",className:\"form-control\",accept:\"image/*\",onChange:handleImageChange})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary mb-3 mt-2\",children:\"Update\"})]})]});};export default UpdateProduct;","map":{"version":3,"names":["React","useState","useEffect","axios","useParams","Link","jsx","_jsx","jsxs","_jsxs","UpdateProduct","_useParams","id","_useState","name","price","description","stock","category","image","_useState2","_slicedToArray","productData","setProductData","_useState3","_useState4","categories","setCategories","get","concat","then","response","product","data","handleImageChange","e","file","target","files","_objectSpread","handleSubmit","preventDefault","formData","FormData","append","originalCategory","delete","put","headers","console","log","window","location","href","catch","error","className","children","to","onSubmit","type","value","onChange","required","disabled","map","accept"],"sources":["/home/oem/Desktop/MITOS/mitosElectronics/frontend/src/pages/admin_pages/UpdateProduct.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { useParams } from \"react-router-dom\";\nimport { Link } from \"react-router-dom\";\n\nconst UpdateProduct = () => {\n  const { id } = useParams();\n  const [productData, setProductData] = useState({\n    name: \"\",\n    price: 0,\n    description: \"\",\n    stock: 0,\n    category: \"\", // Category ID will be stored here\n    image: null,\n  });\n\n  const [categories, setCategories] = useState([]);\n\n  useEffect(() => {\n    // Fetch the product details using the ID\n    axios\n      .get(`http://127.0.0.1:8000/api/electronics/${id}/`)\n      .then((response) => {\n        const product = response.data;\n        setProductData({\n          name: product.name,\n          price: product.price,\n          description: product.description,\n          stock: product.stock,\n          category: product.category.id, // Assuming category is an object with an 'id' field\n          image: product.image, // You can update image logic if needed\n        });\n      });\n\n    // Fetch available categories for the combobox\n    axios.get(\"http://127.0.0.1:8000/api/categories/\").then((response) => {\n      setCategories(response.data);\n    });\n  }, [id]);\n\n  const handleImageChange = (e) => {\n    const file = e.target.files[0];\n    setProductData({ ...productData, image: file });\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n\n    const formData = new FormData();\n    formData.append(\"name\", productData.name);\n    formData.append(\"price\", productData.price);\n    formData.append(\"description\", productData.description);\n    formData.append(\"stock\", productData.stock);\n    formData.append(\"category\", productData.category);\n    formData.append(\"image\", productData.image);\n\n    if (productData.category === productData.originalCategory) {\n      formData.delete(\"category\");\n    }\n    if (!productData.image) {\n      formData.delete(\"image\");\n    }\n    // Update the product data on the server\n    axios\n      .put(`http://127.0.0.1:8000/api/electronics/${id}/`, formData, {\n        headers: {\n          \"Content-Type\": \"multipart/form-data\",\n        },\n      })\n      .then((response) => {\n        console.log(\"Product updated:\", response.data);\n        // Redirect to products page after successful update\n        window.location.href = \"/view_products\";\n      })\n      .catch((error) => {\n        console.error(\"Error updating product:\", error);\n      });\n  };\n\n  return (\n    <div className=\"container mt-4 text-center\">\n      <h2>\n        <Link to=\"/admin\" className=\"text-dark mr-5\">\n          <i className=\"text-warning fas fa-arrow-left mr-5\"></i>\n        </Link>\n        {\" \"}Update Product\n      </h2>\n      <form onSubmit={handleSubmit}>\n        <div className=\"form-group\">\n          <label>Name:</label>\n          <input\n            type=\"text\"\n            className=\"form-control\"\n            value={productData.name}\n            onChange={(e) =>\n              setProductData({ ...productData, name: e.target.value })\n            }\n            required\n          />\n        </div>\n\n        <div className=\"form-group\">\n          <label>Price:</label>\n          <input\n            type=\"number\"\n            className=\"form-control\"\n            value={productData.price}\n            onChange={(e) =>\n              setProductData({ ...productData, price: e.target.value })\n            }\n            required\n          />\n        </div>\n\n        <div className=\"form-group\">\n          <label>Description:</label>\n          <textarea\n            className=\"form-control\"\n            value={productData.description}\n            onChange={(e) =>\n              setProductData({ ...productData, description: e.target.value })\n            }\n            required\n          />\n        </div>\n\n        <div className=\"form-group\">\n          <label>Stock:</label>\n          <input\n            type=\"number\"\n            className=\"form-control\"\n            value={productData.stock}\n            onChange={(e) =>\n              setProductData({ ...productData, stock: e.target.value })\n            }\n            required\n          />\n        </div>\n\n        <div className=\"form-group\">\n          <label>Category:</label>\n          <select\n            className=\"form-control\"\n            value={productData.category}\n            onChange={(e) =>\n              setProductData({ ...productData, category: e.target.value })\n            }\n            required\n          >\n            <option value=\"\" disabled>\n              Select a category\n            </option>\n            {categories.map((category) => (\n              <option key={category.id} value={category.id}>\n                {category.name}\n              </option>\n            ))}\n          </select>\n        </div>\n        <div className=\"form-group\">\n          <label>Image:</label>\n          <br />\n          <input\n            type=\"file\"\n            className=\"form-control\"\n            accept=\"image/*\"\n            onChange={handleImageChange}\n          />\n        </div>\n        {/* Add input elements for image update if needed */}\n        <button type=\"submit\" className=\"btn btn-primary mb-3 mt-2\">\n          Update\n        </button>\n      </form>\n    </div>\n  );\n};\n\nexport default UpdateProduct;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}